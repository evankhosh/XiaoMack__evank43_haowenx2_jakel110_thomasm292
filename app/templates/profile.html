<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>QuizLiu</title>
    <link rel='stylesheet' href='../static/css/home.css'>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  </head>

  <body>
    <div class="navbar">
      <div class="nav">
        <a href="/home"> QuizLiu </a>
      </div>
      <div class="nav">
        <a href="/create"> Create </a>
      </div>
      <div class="nav">
        <a href="/profile"> Profile </a>
      </div>
      <div class="nav">
        <a href="/logout"> Log Out </a>
      </div>
    </div>

    <div class="container my-5">
      <div class="d-flex align-items-center justify-content-between flex-wrap gap-3">
        <h1 class="m-0">Hi {{ username }}</h1>
        <div class="points-pill">
          Points: <span class="fw-bold">{{ points }}</span>
        </div>
      </div>

      <div class="row g-4 mt-2">
        <!-- Flashcards list -->
        <div class="col-12 col-lg-7">
          <div class="card shadow-sm">
            <div class="card-header">
              <h5 class="m-0">Your Flashcards</h5>
            </div>

            <form id="review" method="POST" action="/profile"> </form>
            <div class="card-body">
              {% if flashcards|length == 0 %}
                <p class="text-muted m-0">No flashcards yet. Go to <a href="/create">Create</a> to make one.</p>
              {% else %}
                <ul class="list-group">
                  {% for title in flashcards %}
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                      <span>{{ title }}</span>
                      <button type="submit" form="review" name="title" value="{{ title }}" class="btn btn-dark w-100"> Review! </button>
                    </li>
                  {% endfor %}
                </ul>
              {% endif %}
            </div>
          </div>
        </div>

        <!-- Changing Password or Username -->
        <div class="col-12 col-lg-5">
          <div class="card shadow-sm mb-4">
            <div class="card-header">
              <h5 class="m-0">Change Username</h5>
            </div>
            <div class="card-body">
              <form method="POST" action="/profile">
                <input type="hidden" name="action" value="change_username" />
                <div class="mb-3">
                  <label class="form-label">New username</label>
                  <input
                    class="form-control"
                    type="text"
                    name="new_username"
                    placeholder="Enter a new username"
                  />
                </div>
                <button class="btn btn-primary" type="submit">Update Username</button>
              </form>
            </div>
          </div>

          <div class="card shadow-sm">
            <div class="card-header">
              <h5 class="m-0">Change Password</h5>
            </div>
            <div class="card-body">
              <form method="POST" action="/profile">
                <input type="hidden" name="action" value="change_password" />

                <div class="mb-3">
                  <label class="form-label">Old password</label>
                  <input
                    class="form-control"
                    type="password"
                    name="old_password"
                    placeholder="Old password"
                  />
                </div>

                <div class="mb-3">
                  <label class="form-label">New password</label>
                  <input
                    class="form-control"
                    type="password"
                    name="new_password"
                    placeholder="New password"
                  />
                </div>

                <button class="btn btn-primary" type="submit">Update Password</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
